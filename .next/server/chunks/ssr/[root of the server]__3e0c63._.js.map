{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///home/kasinadhsarma/dr-detection/app/dashboard/page.tsx"],"sourcesContent":["\"use client\"\nimport type React from \"react\"\nimport { useState, useRef, useCallback } from \"react\"\nimport Image from \"next/image\"\nimport { Upload, Loader2, AlertTriangle, Info, CheckCircle, AlertCircle, Camera, Settings } from \"lucide-react\"\nimport { io } from \"socket.io-client\"\nimport { useEffect } from \"react\"\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\nimport { Dialog, Transition, DialogPanel, DialogTitle } from \"@headlessui/react\"\nimport { Fragment } from \"react\"\nimport \"../styles/dashboard.css\"\nimport { ProgressRing } from \"@/components/ui/ProgressRing\"\nimport type { AnalysisData } from \"@/types/analysis\"\nconst API_URL = process.env.NEXT_PUBLIC_PYTHON_API_URL || \"http://localhost:8000\"\nconst SOCKET_URL = process.env.NEXT_PUBLIC_SOCKET_URL || \"http://localhost:8000\"\n\nconst severityColors: Record<string, string> = {\n  \"No DR\": \"bg-green-100 text-green-800 border-green-200\",\n  \"Mild DR\": \"bg-yellow-50 text-yellow-700 border-yellow-200\", \n  \"Moderate DR\": \"bg-orange-50 text-orange-700 border-orange-200\",\n  \"Severe DR\": \"bg-red-50 text-red-700 border-red-200\",\n  \"Proliferative DR\": \"bg-red-100 text-red-900 border-red-300\"\n}\n\nconst CONFIDENCE_THRESHOLDS = {\n  HIGH: 85,\n  MODERATE: 60,\n  LOW: 40\n}\n\nconst getConfidenceLevel = (confidence: number) => {\n  if (confidence >= CONFIDENCE_THRESHOLDS.HIGH) {\n    return {\n      color: \"text-green-600\",\n      message: \"High confidence prediction\",\n      icon: <CheckCircle className=\"w-5 h-5\" />\n    }\n  }\n  if (confidence >= CONFIDENCE_THRESHOLDS.MODERATE) {\n    return {\n      color: \"text-yellow-600\", \n      message: \"Moderate confidence - consider retaking image\",\n      icon: <AlertCircle className=\"w-5 h-5\" />\n    }\n  }\n  return {\n    color: \"text-red-600\",\n    message: \"Low confidence - please retake image\",\n    icon: <AlertTriangle className=\"w-5 h-5\" />\n  }\n}\n\nconst getProgressBarColor = (score: number): string => {\n  if (score >= CONFIDENCE_THRESHOLDS.HIGH) return \"bg-green-500\"\n  if (score >= CONFIDENCE_THRESHOLDS.MODERATE) return \"bg-yellow-500\"\n  if (score >= CONFIDENCE_THRESHOLDS.LOW) return \"bg-orange-500\"\n  return \"bg-red-500\"\n}\n\nconst ProgressRing = ({ progress, size = 120, className = \"\" }) => {\n  const radius = size * 0.4\n  const strokeWidth = size * 0.1\n  const normalizedProgress = Math.min(Math.max(progress, 0), 100)\n  const circumference = radius * 2 * Math.PI\n  const strokeDashoffset = circumference - (normalizedProgress / 100) * circumference\n  \n  const getColor = (progress: number): string => {\n    if (progress >= CONFIDENCE_THRESHOLDS.HIGH) return \"#22c55e\"\n    if (progress >= CONFIDENCE_THRESHOLDS.MODERATE) return \"#eab308\"\n    if (progress >= CONFIDENCE_THRESHOLDS.LOW) return \"#f97316\" \n    return \"#ef4444\"\n  }\n\n  return (\n    <div className={`relative inline-flex items-center justify-center ${className}`}>\n      <svg width={size} height={size} className=\"transform -rotate-90\">\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={radius}\n          fill=\"none\"\n          stroke=\"#e5e7eb\"\n          strokeWidth={strokeWidth}\n        />\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={radius}\n          fill=\"none\"\n          stroke={getColor(progress)}\n          strokeWidth={strokeWidth}\n          strokeDasharray={circumference}\n          strokeDashoffset={strokeDashoffset}\n          strokeLinecap=\"round\"\n          className=\"transition-all duration-500 ease-out\"\n        />\n      </svg>\n      <div className=\"absolute text-xl font-semibold\">\n        {normalizedProgress.toFixed(0)}%\n      </div>\n    </div>\n  )\n}\n\nconst Dashboard: React.FC = () => {\n  // State definitions remain the same...\n  const [selectedImage, setSelectedImage] = useState<string | null>(null)\n  const [analyzing, setIsAnalyzing] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [analysisResult, setAnalysisResult] = useState<AnalysisResult | null>(null)\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const [cameraError, setCameraError] = useState<string | null>(null)\n  const [isCapturing, setIsCapturing] = useState(false)\n  const [cameraMode, setCameraMode] = useState<\"environment\" | \"user\">(\"environment\")\n  const [isCameraOpen, setIsCameraOpen] = useState(false)\n  const [isCameraReady, setCameraReady] = useState(false)\n  const videoRef = useRef<HTMLVideoElement>(null)\n  const streamRef = useRef<MediaStream | null>(null)\n  const [isSettingsOpen, setIsSettingsOpen] = useState(false)\n  const [analysisHistory, setAnalysisHistory] = useState<AnalysisResult[]>([])\n\n  // Socket.io connection\n  useEffect(() => {\n    const socket = io(SOCKET_URL)\n    socket.on('connect', () => console.log('Socket connected'))\n    socket.on('disconnect', () => console.log('Socket disconnected'))\n    return () => {\n      socket.off('connect')\n      socket.off('disconnect')\n    }\n  }, [])\n\n  // Camera handling functions\n  const startCamera = useCallback(async () => {\n    try {\n      const permission = await navigator.permissions.query({ name: \"camera\" as PermissionName })\n      if (permission.state === \"denied\") {\n        throw new Error(\"Camera permission denied\")\n      }\n\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop())\n      }\n\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: cameraMode,\n          width: { ideal: 1920 },\n          height: { ideal: 1080 }\n        }\n      })\n\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream\n        streamRef.current = stream\n        await videoRef.current.play()\n        setIsCameraOpen(true)\n        setCameraReady(true)\n        setCameraError(null)\n      }\n    } catch (err) {\n      console.error(\"Camera error:\", err)\n      setCameraError(\"Camera access failed\")\n      setIsCameraOpen(false)\n      setCameraReady(false)\n    }\n  }, [cameraMode])\n\n  const stopCamera = useCallback(() => {\n    if (streamRef.current) {\n      streamRef.current.getTracks().forEach(track => track.stop())\n      streamRef.current = null\n    }\n    if (videoRef.current) {\n      videoRef.current.srcObject = null\n    }\n    setIsCameraOpen(false)\n    setCameraReady(false)\n  }, [])\n\n  const captureImage = useCallback(async () => {\n    if (!videoRef.current || !isCameraReady) {\n      setCameraError(\"Camera not ready\")\n      return\n    }\n\n    try {\n      setIsCapturing(true)\n      setError(null)\n\n      const video = videoRef.current\n      const canvas = document.createElement(\"canvas\")\n      canvas.width = video.videoWidth\n      canvas.height = video.videoHeight\n\n      const ctx = canvas.getContext(\"2d\")\n      if (!ctx) throw new Error(\"Canvas context failed\")\n\n      ctx.drawImage(video, 0, 0)\n\n      const blob = await new Promise<Blob>((resolve, reject) => {\n        canvas.toBlob(\n          blob => blob ? resolve(blob) : reject(\"Capture failed\"),\n          \"image/jpeg\",\n          0.95\n        )\n      })\n\n      const file = new File([blob], \"capture.jpg\", { type: \"image/jpeg\" })\n      setSelectedImage(URL.createObjectURL(blob))\n      stopCamera()\n      await handleImageSelect(file)\n\n    } catch (err) {\n      console.error(\"Capture error:\", err)\n      setCameraError(\"Image capture failed\")\n    } finally {\n      setIsCapturing(false)\n    }\n  }, [isCameraReady, handleImageSelect, stopCamera])\n\n  // Image handling \n  const handleImageSelect = async (file: File) => {\n    setIsAnalyzing(true)\n    try {\n      const formData = new FormData()\n      formData.append(\"file\", file)\n\n      const response = await fetch(`${API_URL}/predict`, {\n        method: \"POST\",\n        body: formData\n      })\n\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`)\n\n      const result = await response.json()\n      if (!result.success) throw new Error(result.error || \"Analysis failed\")\n\n      const analysisData = {\n        id: Date.now().toString(),\n        date: new Date().toISOString(),\n        ...result.data\n      }\n\n      setAnalysisResult(analysisData)\n      setAnalysisHistory(prev => [analysisData, ...prev])\n      setSelectedImage(URL.createObjectURL(file))\n\n    } catch (err) {\n      console.error(\"Analysis error:\", err)\n      setError(\"Analysis failed\")\n      setAnalysisResult(null)\n    } finally {\n      setIsAnalyzing(false)\n    }\n  }\n\n  // UI Rendering\n  const renderAnalysisResults = () => {\n    if (analyzing) {\n      return (\n        <div className=\"flex flex-col items-center justify-center p-8\">\n          <ProgressRing progress={75} className=\"mb-4\" />\n          <p className=\"text-gray-600\">Analyzing image...</p>\n        </div>\n      )\n    }\n\n    if (!analysisResult) return null\n\n    const confidenceLevel = getConfidenceLevel(analysisResult.confidence)\n\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between p-4 glassmorphism rounded-lg\">\n          <span className=\"text-gray-600\">Severity Level:</span>\n          <span className={`px-4 py-2 rounded-full text-sm font-medium ${severityColors[analysisResult.severity]}`}>\n            {analysisResult.severity}\n          </span>\n        </div>\n\n        <div className=\"p-6 glassmorphism rounded-lg\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-2\">Confidence Score</h3>\n              <p className={`text-sm ${confidenceLevel.color} flex items-center gap-2`}>\n                {confidenceLevel.icon}\n                {confidenceLevel.message}\n              </p>\n            </div>\n            <ProgressRing progress={analysisResult.confidence} size={80} />\n          </div>\n        </div>\n\n        {analysisResult.severity_scores && (\n          <div className=\"space-y-4\">\n            <h3 className=\"text-sm font-semibold\">Detailed Analysis</h3>\n            {Object.entries(analysisResult.severity_scores)\n              .sort(([, a], [, b]) => b - a)\n              .map(([severity, score]) => (\n                <div key={severity} className=\"flex items-center gap-4\">\n                  <span className=\"text-sm font-medium w-32\">{severity}:</span>\n                  <div className=\"flex-1 h-2 bg-gray-100 rounded-full overflow-hidden\">\n                    <div \n                      className={`h-full ${getProgressBarColor(score)} transition-all duration-500`}\n                      style={{ width: `${score}%` }}\n                    />\n                  </div>\n                  <span className=\"text-sm w-16 text-right\">{score.toFixed(1)}%</span>\n                </div>\n              ))}\n          </div>\n        )}\n\n        {analysisResult.confidence < CONFIDENCE_THRESHOLDS.MODERATE && (\n          <div className=\"p-4 bg-yellow-50 rounded-lg border border-yellow-100\">\n            <div className=\"flex gap-2 text-yellow-800\">\n              <AlertTriangle className=\"w-5 h-5 flex-shrink-0\" />\n              <div>\n                <p className=\"font-medium\">Low confidence detection:</p>\n                <ul className=\"mt-2 space-y-1 text-sm\">\n                  <li>Consider retaking the image</li>\n                  <li>Ensure proper lighting and focus</li>\n                  <li>Consult healthcare professional for diagnosis</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen p-8 bg-gradient-to-b from-gray-50 to-gray-100\">\n      <main className=\"max-w-4xl mx-auto\">\n        <h1 className=\"text-3xl font-bold text-center mb-8\">DR Detection</h1>\n\n        {/* Image capture/upload section */}\n        <section className=\"glassmorphism p-8 rounded-lg shadow-lg\">\n          {isCameraOpen ? (\n            <div className=\"space-y-4\">\n              <div className=\"relative aspect-video bg-black rounded-lg overflow-hidden\">\n                <video\n                  ref={videoRef}\n                  autoPlay\n                  playsInline\n                  muted\n                  className=\"w-full h-full object-cover\"\n                />\n                {!isCameraReady && (\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-black/50\">\n                    <Loader2 className=\"w-8 h-8 animate-spin text-white\" />\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex justify-center gap-4\">\n                <button\n                  onClick={captureImage}\n                  disabled={!isCameraReady || isCapturing}\n                  className=\"px-6 py-3 bg-green-500 text-white rounded-full font-medium hover:bg-green-600 disabled:bg-gray-400\"\n                >\n                  {isCapturing ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <Camera className=\"w-5 h-5\" />\n                  )}\n                  <span>Capture</span>\n                </button>\n\n                <button\n                  onClick={stopCamera}\n                  className=\"px-6 py-3 bg-gray-500 text-white rounded-full font-medium hover:bg-gray-600\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"text-center\">\n              <Upload className=\"w-12 h-12 mx-auto text-gray-400\" />\n              <p className=\"mt-4 text-gray-600\">Take a photo or upload a retinal image</p>\n              \n              <div className=\"mt-8 flex justify-center gap-4\">\n                <button\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-full flex items-center gap-2\"\n                >\n                  <Upload className=\"w-5 h-5\" />\n                  <span>Upload Image</span>\n                </button>\n\n                <button\n                  onClick={() => {\n                    setIsCameraOpen(true)\n                    startCamera()\n                  }}\n                  className=\"px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center gap-2\"\n                >\n                  <Camera className=\"w-5 h-5\" />\n                  <span>Use Camera</span>\n                </button>\n              </div>\n\n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                className=\"hidden\"\n                accept=\"image/*\"\n                onChange={(e) => {\n                  const file = e.target.files?.[0]\n                  if (file) handleImageSelect(file)\n                }}\n              />\n            </div>\n          )}\n        </section>\n\n        {/* Error Messages */}\n        {(error || cameraError) && (\n          <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg\">\n            <div className=\"flex items-center gap-2 text-red-700\">\n              <AlertTriangle className=\"w-5 h-5\" />\n              <p>{error || cameraError}</p>\n            </div>\n          </div>\n        )}\n\n        {/* Analysis Results */}\n        <section className=\"mt-8\">\n          <h2 className=\"text-xl font-semibold mb-4\">Analysis Results</h2>\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\n            {renderAnalysisResults()}\n          </div>\n        </section>\n\n        {/* Analysis History */}\n        {analysisHistory.length > 0 && (\n          <section className=\"mt-8\">\n            <h2 className=\"text-xl font-semibold mb-4\">Previous Analyses</h2>\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n              {analysisHistory.map((result) => (\n                <div key={result.id} className=\"bg-white p-6 rounded-lg shadow-sm\">\n                  <div className=\"flex justify-between items-start mb-4\">\n                    <span className={`px-3 py-1 rounded-full text-sm font-medium ${severityColors[result.severity]}`}>\n                      {result.severity}\n                    </span>\n                    <time className=\"text-sm text-gray-500\">\n                      {new Date(result.date).toLocaleDateString()}\n                    </time>\n                  </div>\n                  <ProgressRing progress={result.confidence} size={60} className=\"mx-auto\" />\n                </div>\n              ))}\n            </div>\n          </section>\n        )}\n\n        {/* Settings Dialog */}\n        <Transition show={isSettingsOpen} as={Fragment}>\n          <Dialog onClose={() => setIsSettingsOpen(false)} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" />\n            \n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n              <Dialog.Panel className=\"w-full max-w-md bg-white rounded-lg p-6\">\n                <Dialog.Title className=\"text-lg font-medium mb-4\">\n                  Camera Settings\n                </Dialog.Title>\n\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Camera Mode\n                    </label>\n                    <select\n                      value={cameraMode}\n                      onChange={(e) => setCameraMode(e.target.value as \"user\" | \"environment\")}\n                      className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm\"\n                    >\n                      <option value=\"user\">Front Camera</option>\n                      <option value=\"environment\">Rear Camera</option>\n                    </select>\n                  </div>\n\n                  <button\n                    onClick={() => setIsSettingsOpen(false)}\n                    className=\"w-full px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600\"\n                  >\n                    Save Changes\n                  </button>\n                </div>\n              </Dialog.Panel>\n            </div>\n          </Dialog>\n        </Transition>\n\n        {/* Settings Button */}\n        <button\n          onClick={() => setIsSettingsOpen(true)}\n          className=\"fixed bottom-8 right-8 p-3 bg-white rounded-full shadow-lg hover:shadow-xl\"\n        >\n          <Settings className=\"w-6 h-6\" />\n        </button>\n      </main>\n    </div>\n  )\n}\n\nexport default Dashboard"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1149, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}